<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>
<body>

    <!-- Titulo de la pagina -->
    <div class="conteiner">
        <nav>
            <button class="button-title">CIRCUITO
              <path
                fill-rule="evenodd"
                d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z"
                clip-rule="evenodd"
              ></path>
            </svg>
            </button>
        </nav>
    </div>

    <!-- Contenedor para la tabla y el botón -->
    <div class="conteiner1">
        <div class="left-panel">
            <button class="addPista" onclick="openPopup()">+</button>

            <table id="infoTable" class="table1 left-table">
                <thead class="thead1">
                    <tr class="tr1">
                        <th class="th1">Nombre</th>
                    </tr>
                </thead>
                <tbody class="tbody1">
                    <!-- Aquí se agregarán las filas -->
                </tbody>
            </table>
        </div>
    

        <!-- Popup -->
        <div id="popup">
            <div class="popupBox">
                <h3>Agregar Nueva Pista</h3>

                <label for="new_namePista">Nombre:</label>
                <input type="text" id="new_namePista" placeholder="Ingresa nombre de nueva pista">

                <label for="new_descriptionPista">Descripción:</label>
                <input type="text" id="new_descriptionPista" placeholder="Ingresa una pequeña descripción">

                <label for="new_imgPista">Imagen (URL):</label>
                <input type="text" id="new_imgPista" placeholder="URL de la imagen de la pista">

                <label for="new_countryImgPista">Pais:</label>
                <input type="text" id="new_countryImgPista" placeholder="URL de la imagen del pais">

                <label for="new_firstGrandPrixPista">Primer Gran Premio:</label>
                <input type="number" id="new_firstGrandPrixPista" placeholder="Año del primer Gran Premio">

                <label for="new_numberPista">Numero de vueltas:</label>
                <input type="number" id="new_numberPista" placeholder="Numero de vueltas de la carrera">

                <label for="new_circuitLengthPista">Longitud del circuito (km):</label>
                <input type="number" id="new_circuitLengthPista" placeholder="Longitud de la pista en km">

                <label for="new_raceDistancePista">Distancia de carrera (km):</label>
                <input type="number" id="new_raceDistancePista" placeholder="Distancia total de la carrera">

                <button onclick="addInfo()">Agregar</button>
                <button onclick="closePopup()">Cerrar</button>
            </div>
        </div>

        <!--   --------------------  WEB COMPONENT  ---------------------------------------    -->

            <div class="right-panel">
                <!-- Tabla en el panel derecho (con la clase específica right-table) -->
                <table class="right-table">
                    <tr>
                        <td><p id="show_countryImgPista"></p><p id="show_new_namePista"></p></td>
                        <td><p id="show_descriptionPista"></p></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <table>
                                <tr>
                                    <td id="show_firstGrandPrixPista"></td>
                                    <td id="show_numberPista"></td>
                                </tr>
                                <tr>
                                    <td id="show_circuitLengthPista"></td>
                                    <td id="show_raceDistancePista"></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        
    </div>





    <!-- JAVA --------------------------------------------------------------------------------     -->

    <script>
        // URL del JSON Server
        const API_URL = "http://localhost:3000/pistas";
    
        // Función para abrir el popup
        function openPopup() {
            document.getElementById('popup').style.display = 'flex';
        }
    
        // Función para cerrar el popup
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
    
        // Función para agregar una pista al JSON Server y actualizar la tabla izquierda
        async function addInfo() {
            const nombre = document.getElementById('new_namePista').value;
            const descripcion = document.getElementById('new_descriptionPista').value;
            const img = document.getElementById('new_imgPista').value;
            const pais = document.getElementById('new_countryImgPista').value;
            const primerGP = document.getElementById('new_firstGrandPrixPista').value;
            const numeroVueltas = document.getElementById('new_numberPista').value;
            const longitud = document.getElementById('new_circuitLengthPista').value;
            const distancia = document.getElementById('new_raceDistancePista').value;
    
            if (!nombre) {
                alert("El nombre es obligatorio");
                return;
            }
    
            const pista = { nombre, descripcion, img, pais, primerGP, numeroVueltas, longitud, distancia };
    
            try {
                await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(pista)
                });
                loadLeftTable();
                closePopup();
            } catch (error) {
                console.error("Error al agregar la pista:", error);
                alert("No se pudo agregar la pista");
            }
        }
    
        // Cargar la tabla izquierda con solo los nombres
        async function loadLeftTable() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error("Error al cargar datos");
    
                const pistas = await response.json();
                const tableBody = document.querySelector('.left-table tbody');
                tableBody.innerHTML = "";
    
                pistas.forEach(pista => {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${pista.nombre}</td>`;
                    row.onclick = () => showDetails(pista);
                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error("Error:", error);
            }
        }
    
        // Mostrar detalles en la tabla derecha cuando se selecciona una pista
        function showDetails(pista) {
            const table = document.querySelector('.right-table');
            table.innerHTML = `
                <tr>
                    <td class="info1"><img src="${pista.pais}" width="80px" hight="40px"><p>${pista.nombre}</p></td>
                    <td class="info2"><p>${pista.descripcion}</p></td>
                </tr>
                <tr>
                    <td class="info3"><img src="${pista.img}"width="800px" hight="800px"</td>
                    <td class="info4">
                        <table>
                            <tr>
                                <td>Primer GP: ${pista.primerGP}</td>
                                <td>Vueltas: ${pista.numeroVueltas}</td>
                            </tr>
                            <tr>
                                <td>Longitud: ${pista.longitud} km</td>
                                <td>Distancia: ${pista.distancia} km</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            `;
        }
    
        // Cargar la tabla izquierda al cargar la página
        window.onload = function () {
            loadLeftTable();
        };
    </script>
    
    



    <style>
        /* Estilos generales */
            body {
                font-family: Arial, sans-serif;
                background-color: rgb(37, 37, 37);
            }

            .conteiner, .conteiner1 {
                margin-bottom: 20px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }

            th, td {
                padding: 10px;
                text-align: center;
            }

            .th1 {
                color: white;
            }

            /* Estilos del popup */
        #popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popupBox {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 500px;
            text-align: center;
            line-height: 1.5; /* 1.5 veces el tamaño de la fuente */
        }

        .popupBox input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .popupBox button {
            padding: 10px 15px;
            background-color: #a10b0b;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }

        .popupBox button:hover {
            background-color: #990a0a;
        }

        .popupBox button.close {
            background-color: #f44336;
        }

        .popupBox button.close:hover {
            background-color: #d32f2f;
        }

        /* Botón para abrir el popup */
        .addPista {
            padding: 10px 15px;
            background-color: #d80202;
            color: white;
            border: none;
            cursor: pointer;
        }

        .addPista:hover {
            background-color: #910808;
        }
        /* Estilos del popup */
        #popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popupBox {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 500px;
            text-align: center;
            line-height: 1.5; /* 1.5 veces el tamaño de la fuente */
        }

        .popupBox input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .popupBox button {
            padding: 10px 15px;
            background-color: #a10b0b;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }

        .popupBox button:hover {
            background-color: #990a0a;
        }

        .popupBox button.close {
            background-color: #f44336;
        }

        .popupBox button.close:hover {
            background-color: #d32f2f;
        }


            /* ------------------------ tabla izquierda (infoTable) ------------------------ */
            .left-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }

            .left-table th, .left-table td {
                padding: 10px;
                text-align: center;
                background-color: rgb(196, 18, 18);
                max-width: 300px;
                min-width: 200px;
                word-wrap: break-word; /* Permite que el texto largo se divida en varias líneas */
                vertical-align: middle; /* Alinea el contenido verticalmente */
                color: white ;
            }

            .left-table td:hover {
                background-color: rgb(161, 15, 15);
            }

            /* ------------------------ tabla derecha (right-table) ------------------------ */
            .right-table {
                width: 100%;
                height: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                word-wrap: break-word;
            }


            .info1{
                height: 20%;
            }

            .right-table td {
                padding: 10px;
                text-align: center;
                background-color: #5f5f5f;;
                word-wrap: break-word; /* Permite que el texto largo se divida en varias líneas */
                vertical-align: middle; /* Alinea el contenido verticalmente */
                
            }

            .right-table td:hover {
                background-color: rgb(90, 90, 90);
            }

            .info1{
                display: flex;
                flex-direction: row;
                margin: 0;
                align-items: center;
                height: 100%;
                justify-content: center;
                font-size: 50px;
            }

            .info1 img {
                width: 100px;
                height: 60px;
                border-radius: 10px;
                margin-right: 10px;
            }

            .info2 {
                height: 30%
            }

            .info4 table tr td {
                height: 50%;
            }

            /* ------------------------ conteiner ------------------------ */
            .conteiner1 {
                display: flex;
                flex-direction: row;
                padding-bottom: 20px;
                justify-content: space-between;
            }

            .left-panel {
                flex: 1;
                box-sizing: border-box;
                background-color: #525252;

                height: 800px;
                max-width: 300px;
                min-width: 200px;
                overflow: hidden; /* Asegura que el contenido no se desborde */
                display: flex;
                flex-direction: column;
            }

            .right-panel {
                flex: 1;
                padding: 20px;
                box-sizing: border-box;
                background-color: #525252;
                height: 800px;
                overflow: auto; /* Permite desplazamiento si el contenido es más grande */
                display: flex;
                flex-direction: column;
            }

            .right-table {
                width: 100%;
                max-width: 100%; /* Evita que se desborde */
                table-layout: fixed; /* Mantiene las celdas dentro del ancho del contenedor */
                word-wrap: break-word; /* Permite dividir palabras largas */
            }

            .info4 {
                height: 100%;
                display: flex;
                align-items: center; /* Centra el contenido verticalmente */
                justify-content: center;
            }

            .info4 table {
                width: 100%;
                height: 50%;
                table-layout: fixed; /* Asegura que la tabla interna ocupe el espacio */
            }

            .info4 table td {
                height: 50%;
            }


                        



    </style>
</body>
</html>
